<!doctype html>
<html lang="en">
    <%- include("./partials/head.ejs", { title: `Hack Portal - Hiring Detail`}) %>
    <body>
        

        <div class="container-fluid py-5">
            <div class="container">

                <h1 style="margin-top: 50px; text-align: center;"> Applying at HackJob Portal </h1></br>

                <div class="col-lg-12">
                    <div class="container mt-5">
                        

                        

                        <div style="border: 1px solid black; padding:10px;">

                            <p class="font-weight-bold"><span style="font-weight: bold;">Job Title:</span> <%= job.title %></span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Department:</span> <%= job.Company.name%></span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Vacancy:</span> <%= job.vacancy %></span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold; white-space: pre-line;">Requirement:</span> <%= job.requirement %></span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Base Salary:</span> <%=  %> </span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Bonus:</span> <%=  %> </span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Last Update:</span> <%= job.updatedAt %></span></br></p>
                            <p class="font-weight-bold"><span style="font-weight: bold;">Total applied : </span><%= job.Applicants.length%></span></br></p>

                        </div>


                        <%if (job.vacancy > job.Applicants.length) { %>
                        <button onclick="location.href='/jobList/<%= job.id %>/apply'" style="width:auto; margin-top: 10px;" class="btn btn-success">Apply</button></div></br>
                        <% } %>
                        <table style="width: 100%; border: none; border-collapse: collapse; margin: 25px 0; font-size: 0.9em; min-width: 400px; font-family: 'Quicksand', sans-serif; text-align: center;">
                            <tr style="border-bottom: 1px solid #dddddd;">
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold;">Fullname</th> 
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold;">Applicant Code</th>
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Gender</th>       
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Email</th>
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Phone</th>
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Date Applied</th>
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Status</th>
                                <th style="color: grey; text-align: center; padding-left: 10px; font-style: bold">Action</th>
                            </tr>
                            <% job.Applicants.forEach(el => { %>
                                <tr style="border-bottom: 1px solid #dddddd;">
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= el.fullName %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= el.gender %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= el.email %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%=  %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= %></td>
                                    <td style="padding-top: 2px; padding-bottom: 2px"><%= el.status %></td>
                                    <% if (el.status === 'pending') { %>
                                        <td style="padding-top: 2px; padding-bottom: 2px; width: 500px;">
                                            <button style="margin: 5px;" class="btn btn-success btn-sm" type="button" onclick="location.href='/hiring/<%= job.id %>/apply/<%= el.id %>/approve'">Approve</button>
                                            <button style="margin: 5px;" class="btn btn-danger btn-sm" type="button" onclick="location.href='/hiring/<%= job.id %>/apply/<%= el.id %>/reject'">Reject</button>
                                        </td>
                                    <% } %>
                                    
                                </tr>
                            <% }) %>
                        </table>

                                            
                    </div>
                </div>
            </div>
        </div>
        
        <%- include("./partials/script.ejs") %>
    </body>
</html>